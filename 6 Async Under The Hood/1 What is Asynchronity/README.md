# Что такое асинхронность

## Кооперативная многозадачность

Мы уже говорили про потоки и процессы - средства, позволяющие одновременно с течением программы выполнить какую-то дополнительную работу.

Минус процессов и тредов в том, что это безумно тяжелые объекты. Поэтому нельзя создавать много процессов или тредов одновременно - банально не хватит памяти.

Сейчас мы разберемся, как происходит создание нового процесса на уровне операционной системы.

### Старт процессов

В Linux и MacOS старт процесса осуществляется с помощью двух системных вызовов. В Windows свои интересные штуки, но все это близко и похоже по реализации.

Всегда есть родительский процесс, запускающий другой процесс. Если мы запускаем Python, родительским процессом всегда является bash, то есть, наша командная строка.

При старте системы существует один единственныей процесс, который имеет id 1. Он и является родительским процессом для всех остальных.

### Fork и Exec

Задача fork в том, чтобы отоединиться от текущего процесса. Отсоединение означает, что вся память процесса копируется в новую сущность, которая затем может продолжить существовать.

Вызов в exec заменяет текущий контекст выполнения новой сущности другой программой.

Например, в терминале мы вызывали функцию find:

1. Произошел вызов fork - вся память процесса терминала скопировалась в новый созданный процесс.
2. Произошел вызов exec - текущий контекст выполнения (то есть терминал) сменился на контекст выполнения программы find.
3. find теперь выполняется в другом дочернем для терминала процессе.

Создание нового процесса - это очень долгое и очень дорогое по памяти явление.
